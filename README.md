# README file for LiteChat

## 功能与解决方案

### 1. 登录与身份验证
#### 用户名密码注册、登录
客户端：设计登录界面，发送登录请求，接收登录请求后转到主页面。
服务器：进行身份验证并返回句柄。用户密码应加密传输、储存。防止sql注入。

用户信息结构：
id（PK）
邮箱（Key）
昵称（NotNull）
密码（Hash，NotNull）
头像路径
生日
签名

客户端与服务器通讯数据结构：
登录：
QByteArray [（）——请求标识，[id，密码哈希值]]
QByteArray [回应标识，[成功标识，句柄]]
注册：
QByteArray [请求标识，[id，邮箱，昵称，密码哈希值，生日]]
QByteArray [回应标识，[成功标识，句柄]]

#### 验证码功能
客户端：
服务器：
#### 找回密码功能
客户端：
服务器：
#### *人脸识别登录

### 2. 好友系统
#### 好友状态显示
客户端：向服务器发送请求好友与其状态信息，显示在线好友与好友请求。
服务器：定时确认用户是否在线，遇到未回应客户端，注销其句柄。遇到请求向客户端发送其好友与状态信息。

客户端与服务器通讯数据结构：
请求好友：
QByteArray [请求标识，[id，句柄]]
QByteArray [回应标识，\[[好友昵称1，好友状态1]，[好友昵称2，好友状态2]，...]]
QByteArray [回应标识，\[[好友昵称1，好友信息1]，[好友昵称2，好友信息2]，...]]
确认是否在线：
QByteArray [请求标识]
QByteArray [回应标识]

#### 搜索用户与好友申请
客户端：向服务端发送搜索请求，根据服务器返回信息选择是否添加好友。
服务器：返回相应用户的基本信息，处理好友添加。
搜索好友：
QByteArray [请求标识，[搜索信息]]
QByteArray [回应标识，\[[好友昵称1，好友信息1]，[好友昵称2，好友信息2]，...]]
添加好友：
QByteArray [请求标识，[id]]
QByteArray [回应标识，[请求成功与否]]

#### 好友管理

### 3. 聊天系统

#### 聊天功能
客户端：编辑消息，在本地记录消息，向服务器发送消息
服务器：处理聊天信息，加入数据库，并向目标用户发送聊天消息
QByteArray [请求标识，[id，句柄，聊天记录]]
向发送者：QByteArray [回应标识，[成功]]
向接收者：QByteArray [回应标识，[聊天记录]]

#### 聊天记录管理
客户端：加载本地聊天记录，向服务器请求云端聊天记录，显示未读信息。
服务器：返回聊天记录信息。

聊天记录数据结构：
FROM
TO
TIME
信息

#### 群聊功能
#### 文件、图片、语音
#### 字体与表情
#### *视频、语音通话

### 4. 额外功能
#### 朋友圈